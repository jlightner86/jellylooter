<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JellyLooter - {{ t.get('changelog', 'Changelog') }}</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/jlightner86/jellylooter/main/icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --jf-primary: #00a4dc; --jf-bg-dark: #101010; --jf-bg-card: #1a1a1a; --jf-bg-input: #2a2a2a; --jf-text: #fff; --jf-text-muted: #888; --jf-border: #333; --jf-success: #4caf50; --jf-gradient: linear-gradient(135deg, #00a4dc 0%, #aa5cc3 100%); --jf-purple: #aa5cc3; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Quicksand', sans-serif; background: var(--jf-bg-dark); color: var(--jf-text); min-height: 100vh; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
        @media (min-width: 768px) { .container { padding: 2rem; } }
        .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--jf-border); flex-wrap: wrap; gap: 1rem; }
        .logo { display: flex; align-items: center; gap: 0.75rem; }
        .logo-icon { width: 40px; height: 40px; border-radius: 8px; }
        .logo-text { font-size: 1.5rem; font-weight: 700; background: var(--jf-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .btn { padding: 0.5rem 1rem; background: var(--jf-bg-card); border: 1px solid var(--jf-border); border-radius: 8px; color: var(--jf-text); text-decoration: none; font-weight: 600; font-size: 0.875rem; }
        .btn:hover { background: var(--jf-primary); border-color: var(--jf-primary); }
        h1 { font-size: 1.75rem; margin-bottom: 2rem; }
        .version { background: var(--jf-bg-card); border: 1px solid var(--jf-border); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .version-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .version-number { font-size: 1.25rem; font-weight: 700; color: var(--jf-primary); }
        .version-date { font-size: 0.875rem; color: var(--jf-text-muted); }
        .version-tag { padding: 0.25rem 0.75rem; background: var(--jf-primary); border-radius: 999px; font-size: 0.75rem; font-weight: 600; }
        .version-tag.major { background: var(--jf-purple); }
        .changes { list-style: none; }
        .changes li { padding: 0.5rem 0; padding-left: 1.5rem; position: relative; color: var(--jf-text-muted); }
        .changes li::before { content: '‚Ä¢'; position: absolute; left: 0; color: var(--jf-primary); }
        .change-type { display: inline-block; padding: 0.125rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-right: 0.5rem; }
        .change-type.new { background: rgba(76,175,80,0.2); color: #4caf50; }
        .change-type.fix { background: rgba(244,67,54,0.2); color: #f44336; }
        .change-type.improve { background: rgba(0,164,220,0.2); color: #00a4dc; }
        .change-type.pro { background: rgba(170,92,195,0.2); color: #aa5cc3; }
        .change-type.security { background: rgba(255,152,0,0.2); color: #ff9800; }
        .footer { text-align: center; padding-top: 2rem; color: var(--jf-text-muted); font-size: 0.875rem; }
        .footer a { color: var(--jf-primary); text-decoration: none; }
        .support-section { background: var(--jf-bg-card); border: 1px solid var(--jf-border); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; }
        .support-section h3 { margin-bottom: 1rem; }
        .support-options { display: flex; flex-direction: column; gap: 1rem; }
        .support-option { display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--jf-bg-input); border-radius: 8px; }
        .support-option-icon { font-size: 2rem; }
        .support-option-info { flex: 1; }
        .support-option-title { font-weight: 600; margin-bottom: 0.25rem; }
        .support-option-desc { font-size: 0.875rem; color: var(--jf-text-muted); }
        .support-warning { background: rgba(255,152,0,0.1); border: 1px solid rgba(255,152,0,0.3); border-radius: 8px; padding: 1rem; margin-top: 1rem; font-size: 0.875rem; color: #ff9800; }
        .btn-kofi { background: #ff5e5b; border-color: #ff5e5b; color: white; }
        .btn-pro { background: var(--jf-purple); border-color: var(--jf-purple); color: white; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="https://raw.githubusercontent.com/jlightner86/jellylooter/main/icon.png" alt="JellyLooter" class="logo-icon">
                <span class="logo-text">JellyLooter</span>
            </div>
            <div style="display:flex;gap:0.5rem;">
                <a href="/" class="btn">‚Üê {{ t.get('back', 'Back') }}</a>
            </div>
        </div>
        <h1>{{ t.get('changelog', 'Changelog') }}</h1>
        
        <!-- Support Section -->
        <div class="support-section">
            <h3>‚ù§Ô∏è Support JellyLooter</h3>
            <div class="support-options">
                <div class="support-option">
                    <span class="support-option-icon">‚òï</span>
                    <div class="support-option-info">
                        <div class="support-option-title">Ko-fi (Donations)</div>
                        <div class="support-option-desc">One-time donations to support development. No features included.</div>
                    </div>
                    <a href="https://ko-fi.com/jellyloot" target="_blank" class="btn btn-kofi">Donate</a>
                </div>
                <div class="support-option">
                    <span class="support-option-icon">‚≠ê</span>
                    <div class="support-option-info">
                        <div class="support-option-title">Pro License ($10)</div>
                        <div class="support-option-desc">Lifetime license for Pro features: notifications, transcoding, scheduling, and more.</div>
                    </div>
                    <a href="https://lightwave43.gumroad.com/l/rmtmrr" target="_blank" class="btn btn-pro">Buy Pro</a>
                </div>
            </div>
            <div class="support-warning">
                ‚ö†Ô∏è <strong>Note:</strong> Ko-fi donations do NOT include Pro features. If you want Pro features, purchase a license from Gumroad. Donations are non-refundable and are for supporting development only.
            </div>
        </div>

        <div class="version">
            <div class="version-header">
                <span class="version-number">v3.1.0</span>
                <span class="version-date">December 2024</span>
                <span class="version-tag">Feature Update</span>
            </div>
            <ul class="changes">
                <li><span class="change-type new">New</span> üîç Library search - find movies/shows by name within any library</li>
                <li><span class="change-type new">New</span> ‚è∞ Time format option - choose 12-hour (1:30 PM) or 24-hour (13:30)</li>
                <li><span class="change-type new">New</span> üîç External metadata API support (TMDB, TVDB, OMDb) - lookup missing IDs</li>
                <li><span class="change-type new">New</span> üìÅ Folder naming format selector - 6 options including standard, IDs with spaces/braces/brackets, TMDB-only, IMDB-only</li>
                <li><span class="change-type new">New</span> üìã Basic/Advanced log view toggle - Basic shows downloads only, Advanced shows all logs</li>
                <li><span class="change-type new">New</span> üìã Copy logs button - copy activity log to clipboard (works over HTTP)</li>
                <li><span class="change-type new">New</span> üåç Timezone selector in Advanced Settings - 30 timezone options</li>
                <li><span class="change-type new">New</span> üì± Mobile menu now includes Sync Now and Rebuild Cache buttons</li>
                <li><span class="change-type new">New</span> üê≥ Dockerfile.nvidia with Jellyfin FFmpeg for NVIDIA GPU transcoding</li>
                <li><span class="change-type new">New</span> ‚úï Cancel button for individual downloads and transcodes</li>
                <li><span class="change-type pro">Pro</span> üé¨ Full transcoding support - H.264, H.265/HEVC, AVI, Mobile, 4K presets</li>
                <li><span class="change-type pro">Pro</span> üé¨ AVI encoding preset - legacy-compatible MPEG-4 + MP3 in AVI container</li>
                <li><span class="change-type pro">Pro</span> ‚ö° Download limit override - allow >10 concurrent downloads (up to 50)</li>
                <li><span class="change-type new">New</span> üîÑ Auto-retry failed downloads - configurable attempts and delay</li>
                <li><span class="change-type pro">Pro</span> üì° *arr auto-import - automatically add series to Sonarr when downloading episodes</li>
                <li><span class="change-type pro">Pro</span> üì° Intelligent *arr path mapping - auto-detects path mappings from filesystem</li>
                <li><span class="change-type pro">Pro</span> üíæ Metadata caching - stores lookups locally for faster repeat browsing</li>
                <li><span class="change-type pro">Pro</span> üìä Real-time transcode progress bar (shows percentage and speed)</li>
                <li><span class="change-type pro">Pro</span> üîÄ Separate transcode workers - downloads continue while transcoding (configurable 1-5 workers)</li>
                <li><span class="change-type pro">Pro</span> üìà Transcode statistics - track files transcoded, space saved, and average reduction</li>
                <li><span class="change-type pro">Pro</span> ‚öñÔ∏è Skip if larger option - automatically keeps original if transcode increases file size</li>
                <li><span class="change-type pro">Pro</span> üö¶ Transcode queue limit - max 10 files pending to prevent memory issues</li>
                <li><span class="change-type pro">Pro</span> üíæ Transcode cache drive - transcode to fast SSD, then move to destination</li>
                <li><span class="change-type pro">Pro</span> üóëÔ∏è Clear transcode cache - remove partial/failed transcode files</li>
                <li><span class="change-type fix">Fix</span> Transcode return code handling - validates output even if ffmpeg exits abnormally</li>
                <li><span class="change-type fix">Fix</span> Transcode process now properly waits for completion (fixes "return code None")</li>
                <li><span class="change-type fix">Fix</span> Transcode error logging - filters FFmpeg progress output from error logs</li>
                <li><span class="change-type fix">Fix</span> Sonarr API lookup format - uses proper params instead of URL concatenation</li>
                <li><span class="change-type fix">Fix</span> Episode folders now use series-level IDs instead of episode IDs</li>
                <li><span class="change-type fix">Fix</span> Episode folders use show name only when series IDs unavailable (no more duplicate folders)</li>
                <li><span class="change-type fix">Fix</span> Rebuild Cache now supports multi-local-server configurations</li>
                <li><span class="change-type fix">Fix</span> Download statistics no longer reset to 0 during active downloads</li>
                <li><span class="change-type fix">Fix</span> Metadata cache datetime.now() error fixed</li>
                <li><span class="change-type fix">Fix</span> Custom themes now persist when navigating between pages</li>
                <li><span class="change-type fix">Fix</span> Toast notifications now appear above license banner</li>
                <li><span class="change-type fix">Fix</span> PRO badge now displays correctly in header</li>
                <li><span class="change-type fix">Fix</span> Worker count max attribute updates after Pro activation</li>
                <li><span class="change-type fix">Fix</span> License activation now forces immediate page reload</li>
                <li><span class="change-type fix">Fix</span> Add Local Server form validation fixed</li>
                <li><span class="change-type fix">Fix</span> Duplicate detection now includes Series (TVDB) and shows checkmarks</li>
                <li><span class="change-type fix">Fix</span> Stop after current download now works correctly</li>
                <li><span class="change-type fix">Fix</span> Download stats persist across restarts</li>
                <li><span class="change-type improve">Improve</span> Activity log controls use icon-only buttons to save space</li>
                <li><span class="change-type improve">Improve</span> Enhanced metadata logging (shows API lookup results and failures)</li>
                <li><span class="change-type improve">Improve</span> Enhanced transcode logging (detailed error output for debugging)</li>
                <li><span class="change-type improve">Improve</span> Transcode now verifies encoder availability before starting (libx265, libx264)</li>
                <li><span class="change-type improve">Improve</span> Enhanced series ID fetching with detailed debug logs</li>
                <li><span class="change-type improve">Improve</span> Mobile touch responsiveness (removed tap delay)</li>
                <li><span class="change-type improve">Improve</span> Download stats update more frequently during active downloads</li>
                <li><span class="change-type improve">Improve</span> Added hint to save settings before refreshing folder cache</li>
                <li><span class="change-type improve">Improve</span> Dockerfile now includes libx265-dev and libx264-dev for transcoding</li>
                <li><span class="change-type improve">Improve</span> Transcode validates output with ffprobe if process exits abnormally</li>
            </ul>
        </div>

        <div class="version">
            <div class="version-header">
                <span class="version-number">v3.0.0</span>
                <span class="version-date">{{ t.get('december', 'December') }} 2024</span>
                <span class="version-tag major">Major Release</span>
            </div>
            <ul class="changes">
                <li><span class="change-type new">New</span> ‚≠ê Rating overlays on posters (IMDB/TMDB ratings)</li>
                <li><span class="change-type new">New</span> üìä Quality badges on posters (4K, 1080p, HDR, Dolby Vision, Atmos)</li>
                <li><span class="change-type new">New</span> üè∑Ô∏è Content rating badges (PG-13, R, TV-MA)</li>
                <li><span class="change-type new">New</span> Toggle for ratings and quality badges in Advanced Settings</li>
                <li><span class="change-type new">New</span> ‚å®Ô∏è Keyboard shortcuts modal (press ? to view)</li>
                <li><span class="change-type new">New</span> üìä Download statistics widget (speed, queue, today's downloads)</li>
                <li><span class="change-type new">New</span> üì¶ Collection/Playlist "Download All" button</li>
                <li><span class="change-type new">New</span> üíæ Config export/import (Settings ‚Üí Backup & Restore)</li>
                <li><span class="change-type new">New</span> üè• Health check endpoint (/health) for Docker monitoring</li>
                <li><span class="change-type pro">Pro</span> Licensing system with Free/Trial/Pro tiers</li>
                <li><span class="change-type pro">Pro</span> üîÑ Download resume - interrupted downloads can be resumed</li>
                <li><span class="change-type pro">Pro</span> Notifications via Apprise (Discord, Telegram, 80+ services)</li>
                <li><span class="change-type pro">Pro</span> <span style="opacity: 0.6;">üöß GPU transcoding (NVIDIA NVENC, Intel QuickSync, AMD VAAPI) - <em>Coming Soon</em></span></li>
                <li><span class="change-type pro">Pro</span> <span style="opacity: 0.6;">üöß Transcoding presets: H.264, H.265, Mobile, 4K Optimized - <em>Coming Soon</em></span></li>
                <li><span class="change-type pro">Pro</span> Download and bandwidth scheduling</li>
                <li><span class="change-type pro">Pro</span> *arr integration - Sonarr/Radarr folder naming</li>
                <li><span class="change-type pro">Pro</span> Custom themes (14 presets including seasonal + custom colors)</li>
                <li><span class="change-type pro">Pro</span> Multiple local servers for duplicate detection</li>
                <li><span class="change-type pro">Pro</span> Concurrent downloads limit (Free: 2, Pro: 10)</li>
                <li><span class="change-type security">Security</span> bcrypt password hashing</li>
                <li><span class="change-type security">Security</span> Rate limiting on login (5 attempts/minute)</li>
                <li><span class="change-type security">Security</span> Path traversal protection</li>
                <li><span class="change-type security">Security</span> Input validation and security headers</li>
                <li><span class="change-type security">Security</span> API keys encrypted at rest</li>
                <li><span class="change-type security">Security</span> Backup license system for license recovery</li>
                <li><span class="change-type new">New</span> Single-click to select, double-click to open folders</li>
                <li><span class="change-type new">New</span> Keyboard shortcuts (P=pause, D=download, 1/2/3=tabs, ?=help)</li>
                <li><span class="change-type new">New</span> Interaction hints and hover tooltips</li>
                <li><span class="change-type new">New</span> Stop after current downloads button</li>
                <li><span class="change-type new">New</span> Mobile hamburger menu with Downloads & Stats</li>
                <li><span class="change-type new">New</span> Movie downloads now use folder with year (e.g., "Inception (2010)/")</li>
                <li><span class="change-type new">New</span> Automatic subtitle download (SRT, ASS, VTT)</li>
                <li><span class="change-type new">New</span> Collapsible panels (click header to collapse)</li>
                <li><span class="change-type improve">Improve</span> 2-second polling for better performance</li>
                <li><span class="change-type improve">Improve</span> Config caching reduces disk I/O</li>
                <li><span class="change-type fix">Fix</span> Folder names now visible in browser</li>
                <li><span class="change-type fix">Fix</span> Download panel button tooltips</li>
            </ul>
        </div>

        <div class="version">
            <div class="version-header">
                <span class="version-number">v2.4.1</span>
                <span class="version-date">{{ t.get('december', 'December') }} 2024</span>
            </div>
            <ul class="changes">
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_mobile_view', 'Mobile view now works correctly with hamburger menu') }}</li>
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_download_error', 'Fixed download errors with username/password auth') }}</li>
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_poster_aspect', 'Fixed poster image aspect ratio') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_language_selector', 'Language selector in settings with full UI translations') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_title_downloads', 'Download count shown in browser tab title') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_select_all', 'Select All / Deselect All button for bulk selection') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_filter', 'Filter/search box to find items in current view') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_history', 'Download history panel with timestamps') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_eta', 'Estimated time remaining on active downloads') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_quick_paths', 'Quick path selection from library mappings when downloading') }}</li>
            </ul>
        </div>

        <div class="version">
            <div class="version-header">
                <span class="version-number">v2.3.0</span>
                <span class="version-date">{{ t.get('december', 'December') }} 2024</span>
            </div>
            <ul class="changes">
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_auth_optional', 'Authentication now optional (off by default)') }}</li>
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_tooltip', 'Tooltip z-index fixed') }}</li>
                <li><span class="change-type fix">{{ t.get('fix', 'Fix') }}</span> {{ t.get('ch_pagination', 'All items now display with server-side pagination') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_responsive', 'Mobile-friendly responsive design') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_grid_list', 'Grid/List view toggle') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_items_page', 'Pagination with configurable items per page') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_queue_order', 'Download queue ordering options') }}</li>
                <li><span class="change-type new">{{ t.get('new', 'New') }}</span> {{ t.get('ch_multilang', 'Multi-language support (English, Spanish, German)') }}</li>
            </ul>
        </div>

        <!-- Special Thanks -->
        <div class="version" style="background: rgba(170,92,195,0.1); border-color: rgba(170,92,195,0.3);">
            <div class="version-header">
                <span class="version-number" style="color: var(--jf-purple);">üôè Special Thanks</span>
            </div>
            <p style="color: var(--jf-text-muted); font-size: 0.875rem; margin-bottom: 1rem;">
                A huge thank you to our beta testers and contributors who help make JellyLooter better:
            </p>
            <ul class="changes">
                <li style="color: var(--jf-text);">
                    <a href="https://github.com/vwidmer" target="_blank" style="color: var(--jf-primary); text-decoration: none; font-weight: 600;">vwidmer</a> 
                    - Beta testing, bug reports, and feature suggestions for transcoding, *arr integration, and download improvements
                </li>
            </ul>
            <p style="color: var(--jf-text-muted); font-size: 0.8rem; margin-top: 1rem;">
                Want to be listed here? Contribute on <a href="https://github.com/jlightner86/jellylooter" target="_blank" style="color: var(--jf-primary);">GitHub</a> or help test new features!
            </p>
        </div>

        <!-- Legal Disclaimer -->
        <div class="version" style="background: rgba(255,152,0,0.1); border-color: rgba(255,152,0,0.3);">
            <div class="version-header">
                <span class="version-number" style="color: #ff9800;">‚öñÔ∏è Legal Notice</span>
            </div>
            <p style="color: var(--jf-text-muted); font-size: 0.875rem; margin: 0;">
                JellyLooter is designed for legitimate personal use only. We do not support piracy or illegal downloading of copyrighted content. You are solely responsible for ensuring your use of this software complies with all applicable laws. See the Help page for full disclaimer.
            </p>
        </div>

        <div class="footer">
            <p>JellyLooter v{{ version }} ‚Ä¢ <a href="https://github.com/jlightner86/jellylooter" target="_blank">GitHub</a></p>
        </div>
    </div>
</body>
</html>
